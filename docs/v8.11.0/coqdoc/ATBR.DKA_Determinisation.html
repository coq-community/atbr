<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ATBR.DKA_Determinisation</h1>

<div class="code">
<span class="comment">(**************************************************************************)</span><br/>
<span class="comment">(*&nbsp;&nbsp;This&nbsp;is&nbsp;part&nbsp;of&nbsp;ATBR,&nbsp;it&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GNU&nbsp;Lesser&nbsp;General&nbsp;Public&nbsp;License&nbsp;version&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(see&nbsp;file&nbsp;LICENSE&nbsp;for&nbsp;more&nbsp;details)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;2009-2011:&nbsp;Thomas&nbsp;Braibant,&nbsp;Damien&nbsp;Pous.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(**************************************************************************)</span><br/>

<br/>
</div>

<div class="doc">
Conversion from NFAs to DFAs.

<div class="paragraph"> </div>

    The algorithm basically constructs a <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a></span>, i.e.,
<ul class="doclist">
<li> a bijection from reachable set of states to a new set of states,

</li>
</ul>
    represented as a <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#Table"><span class="id" title="abbreviation">Table</span></a></span> together with a bound (the next fresh state, 
    or, equivalently, the size of the <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#Table"><span class="id" title="abbreviation">Table</span></a></span>)
<ul class="doclist">
<li> a transition relation over these new states, represented by a
      map (<span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#Delta"><span class="id" title="abbreviation">Delta</span></a></span>)

</li>
</ul>
    
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.Common.html#"><span class="id" title="library">Common</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.Classes.html#"><span class="id" title="library">Classes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.Graph.html#"><span class="id" title="library">Graph</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.Monoid.html#"><span class="id" title="library">Monoid</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.SemiLattice.html#"><span class="id" title="library">SemiLattice</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.SemiRing.html#"><span class="id" title="library">SemiRing</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.KleeneAlgebra.html#"><span class="id" title="library">KleeneAlgebra</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.MxGraph.html#"><span class="id" title="library">MxGraph</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.MxSemiLattice.html#"><span class="id" title="library">MxSemiLattice</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.MxSemiRing.html#"><span class="id" title="library">MxSemiRing</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.MxKleeneAlgebra.html#"><span class="id" title="library">MxKleeneAlgebra</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.DKA_Definitions.html#"><span class="id" title="library">DKA_Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#"><span class="id" title="library">DKA_StateSetSets</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.Numbers.html#"><span class="id" title="library">Numbers</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ATBR.Utils_WF.html#"><span class="id" title="library">Utils_WF</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Strict</span> <span class="id" title="keyword">Implicit</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Printing</span> <span class="id" title="keyword">Implicit</span> <span class="id" title="var">Defensive</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Numbers.Positive</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">num_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="Table"><span class="id" title="abbreviation">Table</span></a> := (<a class="idref" href="ATBR.DKA_StateSetSets.html#statesetmap"><span class="id" title="abbreviation">statesetmap</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#state"><span class="id" title="abbreviation">state</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a name="Delta"><span class="id" title="abbreviation">Delta</span></a> := (<a class="idref" href="ATBR.DKA_Definitions.html#statelabelmap"><span class="id" title="abbreviation">statelabelmap</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#state"><span class="id" title="abbreviation">state</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a name="Store"><span class="id" title="abbreviation">Store</span></a> := (<a class="idref" href="ATBR.DKA_Determinisation.html#Table"><span class="id" title="abbreviation">Table</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#Delta"><span class="id" title="abbreviation">Delta</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#state"><span class="id" title="abbreviation">state</span></a>)%<span class="id" title="keyword">type</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="S"><span class="id" title="section">S</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">num_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="S.A"><span class="id" title="variable">A</span></a> : <a class="idref" href="ATBR.DKA_Definitions.html#NFA.t"><span class="id" title="record">NFA.t</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="delta"><span class="id" title="abbreviation">delta</span></a> := (<a class="idref" href="ATBR.DKA_Definitions.html#NFA.delta"><span class="id" title="projection">NFA.delta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="initiaux"><span class="id" title="abbreviation">initiaux</span></a> := (<a class="idref" href="ATBR.DKA_Definitions.html#NFA.initiaux"><span class="id" title="projection">NFA.initiaux</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="finaux"><span class="id" title="abbreviation">finaux</span></a> := (<a class="idref" href="ATBR.DKA_Definitions.html#NFA.finaux"><span class="id" title="projection">NFA.finaux</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="max_label"><span class="id" title="abbreviation">max_label</span></a> := (<a class="idref" href="ATBR.DKA_Definitions.html#NFA.max_label"><span class="id" title="projection">NFA.max_label</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="size"><span class="id" title="abbreviation">size</span></a> := (<a class="idref" href="ATBR.DKA_Definitions.html#NFA.size"><span class="id" title="projection">NFA.size</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>).<br/>

<br/>
</div>

<div class="doc">
extension of the transition function to sets 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="delta_set"><span class="id" title="definition">delta_set</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">delta</span> := <a class="idref" href="ATBR.DKA_Determinisation.html#delta"><span class="id" title="abbreviation">delta</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span>: <a class="idref" href="ATBR.DKA_Definitions.html#label"><span class="id" title="abbreviation">label</span></a>) (<span class="id" title="var">q</span>: <a class="idref" href="ATBR.DKA_Definitions.html#stateset"><span class="id" title="abbreviation">stateset</span></a>) =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.fold"><span class="id" title="axiom">StateSet.fold</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.union"><span class="id" title="axiom">StateSet.union</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta"><span class="id" title="variable">delta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#x"><span class="id" title="variable">x</span></a>)) <a class="idref" href="ATBR.DKA_Determinisation.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.empty"><span class="id" title="axiom">StateSet.empty</span></a>.<br/>

<br/>
</div>

<div class="doc">
we start with the store mapping the set of initial states to one 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="initial_store"><span class="id" title="definition">initial_store</span></a>: <a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add"><span class="id" title="axiom">StateSetMap.add</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 0) (<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.empty"><span class="id" title="axiom">StateSetMap.empty</span></a> <span class="id" title="var">_</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.empty"><span class="id" title="axiom">StateLabelMap.empty</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,(</span></a><a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>

<br/>
</div>

<div class="doc">
the algorithm (function <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a></span> below) consists in iterating the following function <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#step"><span class="id" title="definition">step</span></a></span>, 
     defined by open recursion through the <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Equiv.html#loop"><span class="id" title="definition">loop</span></a></span> argument.
     intuitively, <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#step"><span class="id" title="definition">step</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Equiv.html#loop"><span class="id" title="definition">loop</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DisjointSets.html#PosDisjointSets.p"><span class="id" title="projection">p</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.Examples.html#Tactics.ISR.a"><span class="id" title="variable">a</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a></span> assumes that <span class="inlinecode"><a class="idref" href="ATBR.DisjointSets.html#PosDisjointSets.p"><span class="id" title="projection">p</span></a></span> points to <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a></span> in the store <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a></span> ;
     it returns the store where all descendants of <span class="inlinecode"><a class="idref" href="ATBR.DisjointSets.html#PosDisjointSets.p"><span class="id" title="projection">p</span></a></span> along <span class="inlinecode"><a class="idref" href="ATBR.Examples.html#Tactics.ISR.a"><span class="id" title="variable">a</span></a></span> have been added.
     
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="step"><span class="id" title="definition">step</span></a> (<span class="id" title="var">delta_set</span>: <a class="idref" href="ATBR.DKA_Definitions.html#label"><span class="id" title="abbreviation">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#stateset"><span class="id" title="abbreviation">stateset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#stateset"><span class="id" title="abbreviation">stateset</span></a>) <span class="id" title="var">loop</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">q</span> := <a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="variable">delta_set</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">table</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">next</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.find"><span class="id" title="axiom">StateSetMap.find</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="var">table</span> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add"><span class="id" title="axiom">StateSetMap.add</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="var">next</span> <span class="id" title="var">table</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.add"><span class="id" title="axiom">StateLabelMap.add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">next</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.Numbers.html#Positive.S"><span class="id" title="definition">S</span></a> <span class="id" title="var">next</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#q"><span class="id" title="variable">q</span></a> <span class="id" title="var">next</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">nq</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">table</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.add"><span class="id" title="axiom">StateLabelMap.add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">nq</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">next</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
</div>

<div class="doc">
powerfix does (2^size) iterations, which is sufficient since the set of 
     reachable sets of states cannot have a larger size. 
     at each stage, one folds over the set of labels to add all the descendence of <span class="inlinecode"><a class="idref" href="ATBR.DisjointSets.html#PosDisjointSets.p"><span class="id" title="projection">p</span></a></span> 
     
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="build_store"><span class="id" title="definition">build_store</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">step</span> := <a class="idref" href="ATBR.DKA_Determinisation.html#step"><span class="id" title="definition">step</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">max_label</span> := <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="abbreviation">max_label</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.Utils_WF.html#powerfix"><span class="id" title="definition">powerfix</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">loop</span> (<span class="id" title="var">s</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a>) (<span class="id" title="var">p</span>: <a class="idref" href="ATBR.DKA_Definitions.html#stateset"><span class="id" title="abbreviation">stateset</span></a>) (<span class="id" title="var">np</span>: <a class="idref" href="ATBR.DKA_Definitions.html#state"><span class="id" title="abbreviation">state</span></a>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Definitions.html#fold_labels"><span class="id" title="abbreviation">fold_labels</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#step"><span class="id" title="variable">step</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="variable">max_label</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;) (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a> 0.<br/>

<br/>
</div>

<div class="doc">
once we obtained the store, it suffices to convert it into a DFA 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="table_finals"><span class="id" title="definition">table_finals</span></a> (<span class="id" title="var">table</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#Table"><span class="id" title="abbreviation">Table</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">finaux</span> := <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.fold"><span class="id" title="axiom">StateSetMap.fold</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span> <span class="id" title="var">acc</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.exists_"><span class="id" title="axiom">StateSet.exists_</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="variable">finaux</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.add"><span class="id" title="axiom">StateSet.add</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ATBR.DKA_Determinisation.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="variable">table</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.empty"><span class="id" title="axiom">StateSet.empty</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="delta'"><span class="id" title="definition">delta'</span></a> (<span class="id" title="var">d</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#Delta"><span class="id" title="abbreviation">Delta</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.find"><span class="id" title="axiom">StateLabelMap.find</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#d"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">y</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; 0 <span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Definitions.html#DFA.mk"><span class="id" title="constructor">DFA.mk</span></a> <span class="id" title="var">n</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a> <span class="id" title="var">d</span>) 0 (<a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a> <span class="id" title="var">t</span>) <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="abbreviation">max_label</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now starts the correctness proof ; we need to know that the NFA <span class="inlinecode"><a class="idref" href="ATBR.ChurchRosser_Points_vs_Algebraic.html#CR_algebra.A"><span class="id" title="variable">A</span></a></span> is bounded. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="S.HA"><span class="id" title="variable">HA</span></a>: <a class="idref" href="ATBR.DKA_Definitions.html#NFA.bounded"><span class="id" title="record">NFA.bounded</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>.<br/>

<br/>
</div>

<div class="doc">
We start the correctness proof by characterising <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a></span> with the 
     following simpler fixpoint (which is problematic from the computational point of 
     view: one has to compute the worst case exponential bound, even if it is not 
     reached) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="step'"><span class="id" title="definition">step'</span></a> := <a class="idref" href="ATBR.DKA_Determinisation.html#step"><span class="id" title="definition">step</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="steps"><span class="id" title="definition">steps</span></a> <span class="id" title="var">n</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> =&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">Datatypes.S</span></a> <span class="id" title="var">n</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#fold_labels"><span class="id" title="abbreviation">fold_labels</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#step'"><span class="id" title="definition">step'</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="abbreviation">max_label</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="step_compat"><span class="id" title="instance">step_compat</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">_</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">_</span>))))) <a class="idref" href="ATBR.DKA_Determinisation.html#step'"><span class="id" title="definition">step'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#step'"><span class="id" title="definition">step'</span></a>, <a class="idref" href="ATBR.DKA_Determinisation.html#step"><span class="id" title="definition">step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">table</span> <span class="id" title="var">d</span>]<span class="id" title="var">next</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetMapProps.find_analyse</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
characterisation of <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a></span> with <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a></span>, as explained above 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="build_store_spec"><span class="id" title="lemma">build_store_spec</span></a>: <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> (<a class="idref" href="ATBR.Utils_WF.html#power"><span class="id" title="definition">power</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 0).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Heq</span>:=<a class="idref" href="ATBR.Utils_WF.html#powerfix_linearfix"><span class="id" title="lemma">powerfix_linearfix</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a>) (<span class="id" title="var">B</span>:=<a class="idref" href="ATBR.DKA_Definitions.html#stateset"><span class="id" title="abbreviation">stateset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.Numbers.html#Positive.num"><span class="id" title="definition">num</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a>) (<span class="id" title="var">R</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">_</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="tactic">at</span> -1 -2 -3 <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 0) <a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="ATBR.Utils_WF.html#power"><span class="id" title="definition">power</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.Numbers.html#PositiveUtils.fold_num_compat"><span class="id" title="instance">fold_num_compat</span></a>, <a class="idref" href="ATBR.DKA_Determinisation.html#step_compat"><span class="id" title="instance">step_compat</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">H</span> <span class="id" title="var">s</span> ? &lt;- <span class="id" title="var">p</span> <span class="id" title="var">np</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.Numbers.html#PositiveUtils.fold_num_compat"><span class="id" title="instance">fold_num_compat</span></a>, <a class="idref" href="ATBR.DKA_Determinisation.html#step_compat"><span class="id" title="instance">step_compat</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">&quot;</span></a>s %t" := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">s</span>)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">&quot;</span></a>s %d" := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">s</span>)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">&quot;</span></a>s %s" := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">s</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
</div>

<div class="doc">
preliminary lemma: <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a></span> builds bounded sets 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="bounded_delta_set"><span class="id" title="lemma">bounded_delta_set</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">p</span>, <a class="idref" href="ATBR.DKA_Definitions.html#setbelow"><span class="id" title="definition">setbelow</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.Props.fold_rec_nodep"><span class="id" title="lemma">StateSetProps.Props.fold_rec_nodep</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>. <span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">Hx</span> <span class="id" title="var">IH</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.union_1"><span class="id" title="axiom">StateSet.union_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hy</span>|<span class="id" title="var">Hy</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#S.HA"><span class="id" title="variable">HA</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Invariant of the construction 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="invariant"><span class="id" title="record">invariant</span></a> <span class="id" title="var">s</span>: <span class="id" title="keyword">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
all states in the table are bounded 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="i_table_wf"><span class="id" title="projection">i_table_wf</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#setbelow"><span class="id" title="definition">setbelow</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#below"><span class="id" title="abbreviation">below</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
the table is injective 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="i_table_inj"><span class="id" title="projection">i_table_inj</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.Equal"><span class="id" title="definition">StateSet.Equal</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#q"><span class="id" title="variable">q</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
the table is surjective 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="i_table_surj"><span class="id" title="projection">i_table_surj</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Definitions.html#below"><span class="id" title="abbreviation">below</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
the table contains <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a>%<a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s.n"><span class="id" title="variable">n</span></a></span> elements (derivable from the two previous points, but easier to require here) 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="i_table_size"><span class="id" title="projection">i_table_size</span></a>: <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.cardinal"><span class="id" title="axiom">StateSetMap.cardinal</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ATBR.Numbers.html#Positive.nat_of_num"><span class="id" title="definition">nat_of_num</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
any transition in <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a>%<a class="idref" href="ATBR.Examples.html#Tactics.ISR.d"><span class="id" title="variable">d</span></a></span> corresponds to a <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a></span> transition in the NFA 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="i_delta"><span class="id" title="projection">i_delta</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">np</span> <span class="id" title="var">a</span> <span class="id" title="var">nq</span>, <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.MapsTo"><span class="id" title="axiom">StateLabelMap.MapsTo</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#nq"><span class="id" title="variable">nq</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">exists2</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#nq"><span class="id" title="variable">nq</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
Dynamics of the construction : we basically prove that <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Equiv.html#invariant"><span class="id" title="record">invariant</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a></span> 
     entails <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#extends"><span class="id" title="record">extends</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a></span> <span class="inlinecode">(<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Equiv.html#completeness.i"><span class="id" title="variable">i</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a>)</span> <span class="inlinecode">/\</span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#defined"><span class="id" title="definition">defined</span></a></span> <span class="inlinecode">(<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Equiv.html#completeness.i"><span class="id" title="variable">i</span></a></span> <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s"><span class="id" title="section">s</span></a>)</span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="extends"><span class="id" title="record">extends</span></a> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a>): <span class="id" title="keyword">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
the resulting store satisfies the invariant 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="e_invariant"><span class="id" title="projection">e_invariant</span></a> :&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s'"><span class="id" title="variable">s'</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
the table was extended 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="e_table"><span class="id" title="projection">e_table</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s'"><span class="id" title="variable">s'</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="e_next"><span class="id" title="projection">e_next</span></a>: <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a> <a class="idref" href="ATBR.Numbers.html#f73c8f6fcbb252b1160149eb6440afa5"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s'"><span class="id" title="variable">s'</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
Last definition: a store is `defined up to P' if there are transitions for all state <span class="inlinecode"><a class="idref" href="ATBR.DKA_DFA_Language.html#protect.s.n"><span class="id" title="variable">n</span></a></span> and label <span class="inlinecode"><a class="idref" href="ATBR.Examples.html#Tactics.ISR.a"><span class="id" title="variable">a</span></a></span>, 
     except for those specified in P 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="defined"><span class="id" title="definition">defined</span></a> (<span class="id" title="var">s</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a>) <span class="id" title="var">P</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="abbreviation">max_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.In"><span class="id" title="definition">StateLabelMap.In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="transitive_extends"><span class="id" title="instance">transitive_extends</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Classes.RelationClasses.html#Transitive"><span class="id" title="class">Transitive</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#extends"><span class="id" title="record">extends</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hs'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs'</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">e_next1</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reflexive_extends"><span class="id" title="lemma">reflexive_extends</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#extends"><span class="id" title="record">extends</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
the following lemma corresponds to the termination of the
     algorithm: iterating 2^n times is enough to reach all possible
     subsets 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="store_size_bound"><span class="id" title="lemma">store_size_bound</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#nat_of_state"><span class="id" title="abbreviation">nat_of_state</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ATBR.Utils_WF.html#power"><span class="id" title="definition">power</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>)%<span class="id" title="var">nat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_size"><span class="id" title="projection">i_table_size</span></a> <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ATBR.DKA_StateSetSets.html#cardinal_domain"><span class="id" title="lemma">cardinal_domain</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#card_pset"><span class="id" title="lemma">card_pset</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#domain_spec"><span class="id" title="lemma">domain_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.id_num"><span class="id" title="lemma">id_num</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
heart of the proof : specification of <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="steps_correct"><span class="id" title="lemma">steps_correct</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> (<span class="id" title="var">s</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#Store"><span class="id" title="abbreviation">Store</span></a>) <span class="id" title="var">p</span> <span class="id" title="var">np</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ATBR.Utils_WF.html#power"><span class="id" title="definition">power</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Peano.html#7825ccc99f23b0d30c9d40c317ba7af0"><span class="id" title="notation">-</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>)%<span class="id" title="var">nat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Determinisation.html#extends"><span class="id" title="record">extends</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#defined"><span class="id" title="definition">defined</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#defined"><span class="id" title="definition">defined</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span> <span class="id" title="var">Hsize</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">omega_false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>: <a class="idref" href="ATBR.Numbers.html#Positive.num"><span class="id" title="definition">num</span></a>, <a class="idref" href="ATBR.DKA_Determinisation.html#extends"><span class="id" title="record">extends</span></a> <span class="id" title="var">s</span> (<a class="idref" href="ATBR.DKA_Definitions.html#fold_labels"><span class="id" title="abbreviation">fold_labels</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#step'"><span class="id" title="definition">step'</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">p</span> <span class="id" title="var">np</span>) <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">s</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#defined"><span class="id" title="definition">defined</span></a> <span class="id" title="var">s</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">b</span> =&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">np</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Determinisation.html#defined"><span class="id" title="definition">defined</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#fold_labels"><span class="id" title="abbreviation">fold_labels</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#step'"><span class="id" title="definition">step'</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">p</span> <span class="id" title="var">np</span>) <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="var">s</span>) <a class="idref" href="ATBR.DKA_Determinisation.html#P"><span class="id" title="variable">P</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">G</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">G</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">HP</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">G</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">b</span> <span class="id" title="var">Hn</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HP</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hn</span> <span class="id" title="var">Hb</span>). <span class="id" title="tactic">tauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="var">revert</span> <span class="id" title="var">s</span> <span class="id" title="var">Hsize</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">a</span> <span class="id" title="keyword">using</span> <a class="idref" href="ATBR.Numbers.html#PositiveUtils.num_peano_rec"><span class="id" title="lemma">num_peano_rec</span></a>; <span class="id" title="tactic">intros</span> [[<span class="id" title="var">t</span> <span class="id" title="var">d</span>] <span class="id" title="var">n</span>] <span class="id" title="var">Hsize</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.fold_num_O"><span class="id" title="lemma">fold_num_O</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#reflexive_extends"><span class="id" title="lemma">reflexive_extends</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">HP</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span> <span class="id" title="var">Hm</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HP</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span> <span class="id" title="var">Hm</span> <span class="id" title="var">Hb</span>). <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">num_omega_false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.fold_num_S"><span class="id" title="lemma">fold_num_S</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">StateSetMapProps.find_analyse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;existing&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.add"><span class="id" title="axiom">StateLabelMap.add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">np</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">x</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nq</span> <span class="id" title="var">b</span> <span class="id" title="var">nq'</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">StateLabelMapProps.map_iff</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabel.P.reflect"><span class="id" title="lemma">StateLabel.P.reflect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_delta"><span class="id" title="projection">i_delta</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H3</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span> ?]. <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> <span class="id" title="var">Hsize</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hn</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> (<span class="id" title="var">IHa</span> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#Hsize"><span class="id" title="variable">Hsize</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#Hs"><span class="id" title="variable">Hs</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#Hn"><span class="id" title="variable">Hn</span></a>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">HP</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHa</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m'</span> <span class="id" title="var">b</span> <span class="id" title="var">Hm</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">HP</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">Hm</span> <span class="id" title="var">Hb</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.Numbers.html#Positive.eq_spec"><span class="id" title="definition">eq_spec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="var">num_omega</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">s'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add"><span class="id" title="axiom">StateSetMap.add</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <span class="id" title="var">a</span> <span class="id" title="var">p</span>) <span class="id" title="var">n</span> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.add"><span class="id" title="axiom">StateLabelMap.add</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">np</span>: <a class="idref" href="ATBR.Numbers.html#Positive.NumOTA.t"><span class="id" title="definition">NumOTA.t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">n</span> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.Numbers.html#Positive.S"><span class="id" title="definition">S</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> <span class="id" title="var">nq</span>. <span class="id" title="var">StateSetMapProps.map_iff</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#bounded_delta_set"><span class="id" title="lemma">bounded_delta_set</span></a>, <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_wf"><span class="id" title="projection">i_table_wf</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_wf"><span class="id" title="projection">i_table_wf</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H3</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> <span class="id" title="var">q'</span> <span class="id" title="var">nq</span>. <span class="id" title="var">StateSetMapProps.map_iff</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_wf"><span class="id" title="projection">i_table_wf</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H5</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_wf"><span class="id" title="projection">i_table_wf</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H4</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_inj"><span class="id" title="projection">i_table_inj</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H4</span> <span class="id" title="var">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.Numbers.html#PositiveUtils.eq_num_dec"><span class="id" title="lemma">eq_num_dec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_surj"><span class="id" title="projection">i_table_surj</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span> ?]. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">num_omega</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add_2"><span class="id" title="axiom">StateSetMap.add_2</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMapProps.cardinal_2"><span class="id" title="lemma">StateSetMapProps.cardinal_2</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#i_table_size"><span class="id" title="projection">i_table_size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nq</span> <span class="id" title="var">b</span> <span class="id" title="var">nq'</span>. <span class="id" title="var">StateLabelMapProps.map_iff</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabel.P.reflect"><span class="id" title="lemma">StateLabel.P.reflect</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add_2"><span class="id" title="axiom">StateSetMap.add_2</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nq</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_delta"><span class="id" title="projection">i_delta</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H3</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">q</span> ?]. <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add_2"><span class="id" title="axiom">StateSetMap.add_2</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nq</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add_2"><span class="id" title="axiom">StateSetMap.add_2</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nq'</span>; <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHi</span> <span class="id" title="var">s'</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <span class="id" title="var">a</span> <span class="id" title="var">p</span>) <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHi</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHi1</span> <span class="id" title="var">IHi2</span>]; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">Hsize</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span> <span class="id" title="var">H0</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#store_size_bound"><span class="id" title="lemma">store_size_bound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ATBR.Utils_WF.html#power_positive"><span class="id" title="lemma">power_positive</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>). <span class="id" title="var">num_omega</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHa</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#steps"><span class="id" title="definition">steps</span></a> <span class="id" title="var">i</span> <span class="id" title="var">s'</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <span class="id" title="var">a</span> <span class="id" title="var">p</span>) <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHa</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHa</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHa1</span> <span class="id" title="var">IHa2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#e_next"><span class="id" title="projection">e_next</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi1</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add_2"><span class="id" title="axiom">StateSetMap.add_2</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">np</span>. <span class="id" title="tactic">assumption</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHa1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHi1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> <span class="id" title="var">nq</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.add_2"><span class="id" title="axiom">StateSetMap.add_2</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">F</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">nq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">num_omega</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">HP</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHa2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHi2</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> - <span class="id" title="var">Hp</span> <span class="id" title="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span> <span class="id" title="var">Hm</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.Numbers.html#PositiveUtils.eq_num_dec"><span class="id" title="lemma">eq_num_dec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HP</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">y</span> ?]|[ ?|[? ?]]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.Numbers.html#Positive.eq_spec"><span class="id" title="definition">eq_spec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
the initial store satisfies the invariant 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="invariant_initial_store"><span class="id" title="lemma">invariant_initial_store</span></a>: <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="var">StateSetMapProps.map_iff</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="ATBR.DKA_Definitions.html#NFA.bounded_initiaux"><span class="id" title="projection">NFA.bounded_initiaux</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.HA"><span class="id" title="variable">HA</span></a> <span class="id" title="var">Hx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetMapProps.find_tac</span>; <span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a>. <span class="id" title="tactic">replace</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>). <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> 2%<span class="id" title="var">positive</span> <span class="id" title="keyword">with</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 1) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="var">StateLabelMapProps.map_iff</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
therefore, the constructed store extends the initial one, and is completely defined 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="build_store_correct"><span class="id" title="lemma">build_store_correct</span></a>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Determinisation.html#extends"><span class="id" title="record">extends</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="abbreviation">max_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateLabelMap.In"><span class="id" title="definition">StateLabelMap.In</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">d</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store_spec"><span class="id" title="lemma">build_store_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="ATBR.DKA_Determinisation.html#steps_correct"><span class="id" title="lemma">steps_correct</span></a> (<a class="idref" href="ATBR.Utils_WF.html#power"><span class="id" title="definition">power</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#initial_store"><span class="id" title="definition">initial_store</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a> 0) <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> <span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ATBR.Utils_WF.html#power_positive"><span class="id" title="lemma">power_positive</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>). <span class="id" title="tactic">change</span> 2%<span class="id" title="var">positive</span> <span class="id" title="keyword">with</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 1). <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_initial_store"><span class="id" title="lemma">invariant_initial_store</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> <span class="id" title="var">Hn</span> <span class="id" title="var">Ha</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> =&gt; <span class="id" title="var">H'</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#H"><span class="id" title="variable">H</span></a> <span class="id" title="var">n</span> <span class="id" title="var">a</span> <span class="id" title="var">Hn</span> <span class="id" title="var">Ha</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span> <span class="id" title="var">Hm</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">change</span> 2%<span class="id" title="var">positive</span> <span class="id" title="keyword">with</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 1) <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
in particular, the constructed store satisfies the invariant 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a>: <a class="idref" href="ATBR.DKA_Determinisation.html#invariant"><span class="id" title="record">invariant</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store_correct"><span class="id" title="lemma">build_store_correct</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
we define notations for the three projections 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="table"><span class="id" title="abbreviation">table</span></a> := (<a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9dfee2821188a715137e792628f33f8d"><span class="id" title="notation">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="size'"><span class="id" title="abbreviation">size'</span></a> := (<a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#a2f01594460c4eb2ca3a8baa8c49daf5"><span class="id" title="notation">s</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="d"><span class="id" title="abbreviation">d</span></a> := (<a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">%</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#9875b63c3d79e6b933179f05995e3667"><span class="id" title="notation">d</span></a>).<br/>

<br/>
</div>

<div class="doc">
rho is the predicate that associates states of the DFA to the sets of reachable states from the NFA 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="rho"><span class="id" title="abbreviation">rho</span></a> <span class="id" title="var">p</span> <span class="id" title="var">i</span> := (<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <span class="id" title="var">p</span> <span class="id" title="var">i</span> <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="abbreviation">table</span></a>).<br/>

<br/>
</div>

<div class="doc">
theta is the converse function: it associates a set of states to each state of the DFA 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="theta"><span class="id" title="definition">theta</span></a> <span class="id" title="var">i</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.fold"><span class="id" title="axiom">StateSetMap.fold</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">np</span> <span class="id" title="var">acc</span> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="ATBR.DKA_Definitions.html#eq_state_bool"><span class="id" title="abbreviation">eq_state_bool</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#np"><span class="id" title="variable">np</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="ATBR.DKA_Determinisation.html#acc"><span class="id" title="variable">acc</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="abbreviation">table</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.empty"><span class="id" title="axiom">StateSet.empty</span></a>.<br/>

<br/>
</div>

<div class="doc">
specification of theta, for valid states 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="rho_theta"><span class="id" title="lemma">rho_theta</span></a> <span class="id" title="var">i</span>: <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a><a class="idref" href="ATBR.DKA_Determinisation.html#size'"><span class="id" title="abbreviation">size'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#rho"><span class="id" title="abbreviation">rho</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_surj"><span class="id" title="projection">i_table_surj</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="abbreviation">table</span></a>. <span class="id" title="tactic">intro</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMapProps.fold_rec_bis"><span class="id" title="lemma">StateSetMapProps.fold_rec_bis</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span> <span class="id" title="var">acc</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">p</span> : <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.key"><span class="id" title="definition">StateSetMap.key</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">i</span> <a class="idref" href="ATBR.DKA_Determinisation.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="var">i</span> <a class="idref" href="ATBR.DKA_Determinisation.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> ? ? ? <span class="id" title="var">H</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [? ?]. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.empty_1"><span class="id" title="axiom">StateSetMap.empty_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">j</span> <span class="id" title="var">q</span> <span class="id" title="var">t'</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hp'</span> <span class="id" title="var">IH</span> [<span class="id" title="var">r</span> <span class="id" title="var">Hr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">num_analyse</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetMapProps.find_tac</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.Common.html#apply"><span class="id" title="definition">apply</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">Hp'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">F</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
rho is injective (it admits theta as an inverse function) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="theta_rho"><span class="id" title="lemma">theta_rho</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#rho"><span class="id" title="abbreviation">rho</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.Equal"><span class="id" title="definition">StateSet.Equal</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span> <span class="id" title="var">Hpi</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hi</span> := <a class="idref" href="ATBR.DKA_Determinisation.html#i_table_wf"><span class="id" title="projection">i_table_wf</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a> <span class="id" title="var">Hpi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a>, <a class="idref" href="ATBR.DKA_Determinisation.html#rho_theta"><span class="id" title="lemma">rho_theta</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#i_table_inj"><span class="id" title="projection">i_table_inj</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
sets build via theta are bounded, and theta is empty out of the bounds 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="theta_below"><span class="id" title="lemma">theta_below</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">u</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#u"><span class="id" title="variable">u</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size'"><span class="id" title="abbreviation">size'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMapProps.fold_rec_nodep"><span class="id" title="lemma">StateSetMapProps.fold_rec_nodep</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">j</span> <span class="id" title="var">q</span> <span class="id" title="var">Hpj</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">num_analyse</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a>, <span class="id" title="var">Hpj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpj</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpj</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
specification of the <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a></span> function 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="in_delta_set"><span class="id" title="lemma">in_delta_set</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">j</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#j"><span class="id" title="variable">j</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#4bfb4f2d0721ba668e3a802ab1b745a1"><span class="id" title="notation">&lt;-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#j"><span class="id" title="variable">j</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta"><span class="id" title="abbreviation">delta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#k"><span class="id" title="variable">k</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.Props.fold_rec_nodep"><span class="id" title="lemma">StateSetProps.Props.fold_rec_nodep</span></a>. <span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">Hip</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetProps.set_iff</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hi</span>|<span class="id" title="var">Hi</span>]; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">i</span> [<span class="id" title="var">Hip</span> <span class="id" title="var">Hj</span>]]. <span class="id" title="var">revert</span> <span class="id" title="var">Hip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.Props.fold_rec_bis"><span class="id" title="lemma">StateSetProps.Props.fold_rec_bis</span></a> (<span class="id" title="var">P</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <span class="id" title="var">i</span> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <span class="id" title="var">j</span> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a>)); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a></span> and <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a></span> commute 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="theta_delta'"><span class="id" title="lemma">theta_delta'</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#max_label"><span class="id" title="abbreviation">max_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size'"><span class="id" title="abbreviation">size'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Definitions.html#StateSet.eq"><span class="id" title="definition">StateSet.eq</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#d"><span class="id" title="abbreviation">d</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="ATBR.DKA_Determinisation.html#delta_set"><span class="id" title="definition">delta_set</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hi</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.DKA_Determinisation.html#in_delta_set"><span class="id" title="lemma">in_delta_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a>. <span class="id" title="var">StateLabelMapProps.find_analyse</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pi</span> <span class="id" title="var">Hpi</span> <span class="id" title="var">Hix</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta_rho"><span class="id" title="lemma">theta_rho</span></a> <span class="id" title="var">Hix</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.DKA_Determinisation.html#in_delta_set"><span class="id" title="lemma">in_delta_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- (<a class="idref" href="ATBR.DKA_Determinisation.html#theta_rho"><span class="id" title="lemma">theta_rho</span></a> <span class="id" title="var">Hpi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store_correct"><span class="id" title="lemma">build_store_correct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">di</span> <span class="id" title="var">Hdi</span>]; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
we need this lemma to use the <span class="inlinecode"><span class="id" title="var">StateSetProps.exists_iff</span></span> from the FSet library 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="final_compat"><span class="id" title="lemma">final_compat</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.SetoidList.html#compat_bool"><span class="id" title="definition">SetoidList.compat_bool</span></a> <a class="idref" href="ATBR.Numbers.html#Positive.NumSet.E.eq"><span class="id" title="axiom">NumSet.E.eq</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">final_compat</span> : <span class="id" title="var">core</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
two auxiliary lemmas about <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a></span>, to obtain the characterisation <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#mem_table_finals"><span class="id" title="lemma">mem_table_finals</span></a></span> below 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="table_finals_correct"><span class="id" title="lemma">table_finals_correct</span></a>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="abbreviation">table</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">exists2</span></a> <span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">,</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#u"><span class="id" title="variable">u</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMapProps.fold_rec_nodep"><span class="id" title="lemma">StateSetMapProps.fold_rec_nodep</span></a>. <span class="id" title="var">StateSetProps.setdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">j</span> <span class="id" title="var">a</span> <span class="id" title="var">Hpj</span> <span class="id" title="var">IH</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="ATBR.DKA_Definitions.html#StateSet.exists_"><span class="id" title="axiom">StateSet.exists_</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a>) <span class="id" title="var">p</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">He</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. 2: <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="var">StateSetProps.set_iff</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">psubst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.exists_iff"><span class="id" title="lemma">StateSetProps.exists_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">He</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> [<span class="id" title="var">Hk</span> <span class="id" title="var">Hk'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta_rho"><span class="id" title="lemma">theta_rho</span></a> <span class="id" title="var">Hpj</span>). <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="table_finals_complete"><span class="id" title="lemma">table_finals_complete</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">u</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#rho"><span class="id" title="abbreviation">rho</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="abbreviation">table</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">p</span> <span class="id" title="var">i</span> <span class="id" title="var">Hu</span> <span class="id" title="var">Hpi</span> <span class="id" title="var">Hi</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hpi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMapProps.fold_rec_bis"><span class="id" title="lemma">StateSetMapProps.fold_rec_bis</span></a> (<span class="id" title="var">P</span>:=<span class="id" title="keyword">fun</span> <span class="id" title="var">t</span> <span class="id" title="var">acc</span> =&gt; <a class="idref" href="ATBR.DKA_StateSetSets.html#StateSetMap.MapsTo"><span class="id" title="axiom">StateSetMap.MapsTo</span></a> <span class="id" title="var">p</span> <span class="id" title="var">i</span> <a class="idref" href="ATBR.DKA_Determinisation.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.In"><span class="id" title="axiom">StateSet.In</span></a> <span class="id" title="var">i</span> <a class="idref" href="ATBR.DKA_Determinisation.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? <span class="id" title="var">H</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">tauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetMapProps.map_iff</span>. <span class="id" title="tactic">tauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> <span class="id" title="var">j</span> <span class="id" title="var">q'</span> <span class="id" title="var">t</span> <span class="id" title="var">Hqj</span> <span class="id" title="var">Hq</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetMapProps.map_iff</span>. <span class="id" title="tactic">intros</span> [[<span class="id" title="var">Hqp</span> -&gt;]|[<span class="id" title="var">Hqp</span> <span class="id" title="var">Hpi</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="ATBR.DKA_Definitions.html#StateSet.exists_"><span class="id" title="axiom">StateSet.exists_</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> : <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.elt"><span class="id" title="definition">StateSet.elt</span></a> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a>) <span class="id" title="var">q</span>) <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.exists_iff"><span class="id" title="lemma">StateSetProps.exists_iff</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hqp</span>. <span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpi</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.exists_"><span class="id" title="axiom">StateSet.exists_</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">set</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
specification of <span class="inlinecode"><a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="mem_table_finals"><span class="id" title="lemma">mem_table_finals</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#table_finals"><span class="id" title="definition">table_finals</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#table"><span class="id" title="abbreviation">table</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.exists_"><span class="id" title="axiom">StateSet.exists_</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a>) (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.BoolView.html#bool_prop_iff"><span class="id" title="lemma">bool_prop_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.exists_iff"><span class="id" title="lemma">StateSetProps.exists_iff</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="var">StateSetProps.mem_prop</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#table_finals_correct"><span class="id" title="lemma">table_finals_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u</span> <span class="id" title="var">Hu</span> <span class="id" title="var">Hu'</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">u</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u</span> [<span class="id" title="var">H</span> <span class="id" title="var">H'</span>]]. <span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#table_finals_complete"><span class="id" title="lemma">table_finals_complete</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#rho_theta"><span class="id" title="lemma">rho_theta</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta_below"><span class="id" title="lemma">theta_below</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
the construted DFA has at least one state 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="positive_size"><span class="id" title="lemma">positive_size</span></a>: 0 <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size'"><span class="id" title="abbreviation">size'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>:=<a class="idref" href="ATBR.DKA_Determinisation.html#build_store_correct"><span class="id" title="lemma">build_store_correct</span></a>). <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a>, <a class="idref" href="ATBR.DKA_Determinisation.html#e_next"><span class="id" title="projection">e_next</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> 2%<span class="id" title="var">positive</span> <span class="id" title="keyword">with</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 1) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
its transitions are bounded 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="delta'_below"><span class="id" title="lemma">delta'_below</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span>, <a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#d"><span class="id" title="abbreviation">d</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="ATBR.Numbers.html#ddbf8f133916ccb74c07b5fa6de507a0"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#size'"><span class="id" title="abbreviation">size'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a>. <span class="id" title="var">StateLabelMapProps.find_analyse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_delta"><span class="id" title="projection">i_delta</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">px</span> <span class="id" title="var">_</span> <span class="id" title="var">Hx</span>]. <span class="id" title="tactic">apply</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#i_table_wf"><span class="id" title="projection">i_table_wf</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#invariant_build_store"><span class="id" title="lemma">invariant_build_store</span></a> <span class="id" title="var">Hx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="ATBR.DKA_Determinisation.html#positive_size"><span class="id" title="lemma">positive_size</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
the constructed DFA is bounded (requirement of DFA_Merge / DFA_Equiv) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="bounded"><span class="id" title="lemma">bounded</span></a>: <a class="idref" href="ATBR.DKA_Definitions.html#DFA.bounded"><span class="id" title="record">DFA.bounded</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#delta'_below"><span class="id" title="lemma">delta'_below</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#positive_size"><span class="id" title="lemma">positive_size</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ht</span>:= <a class="idref" href="ATBR.DKA_Determinisation.html#table_finals_correct"><span class="id" title="lemma">table_finals_correct</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ht'</span>:= <a class="idref" href="ATBR.DKA_Determinisation.html#theta_below"><span class="id" title="lemma">theta_below</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">t</span> <span class="id" title="var">d</span>] <span class="id" title="var">n</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hi</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Ht'</span>, <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
the state 1 points to the set of initial states 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="theta_0"><span class="id" title="lemma">theta_0</span></a>: <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.eq"><span class="id" title="definition">StateSet.eq</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> 0)) (<a class="idref" href="ATBR.DKA_Determinisation.html#initiaux"><span class="id" title="abbreviation">initiaux</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta_rho"><span class="id" title="lemma">theta_rho</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store_correct"><span class="id" title="lemma">build_store_correct</span></a>. <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Final theorem : correctness of the algorithm, the constructed DFA evaluates as the original NFA 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a name="correct"><span class="id" title="lemma">correct</span></a>: <a class="idref" href="ATBR.DKA_Definitions.html#DFA.eval"><span class="id" title="definition">DFA.eval</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a> <a class="idref" href="ATBR.Classes.html#60ab9d9fc0a104376fc17e0989420a38"><span class="id" title="notation">==</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#NFA.eval"><span class="id" title="definition">NFA.eval</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#S.A"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#positive_size"><span class="id" title="lemma">positive_size</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Hpositive_size</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta_below"><span class="id" title="lemma">theta_below</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Htheta_below</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#delta'_below"><span class="id" title="lemma">delta'_below</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdelta'_below</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta_delta'"><span class="id" title="lemma">theta_delta'</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Htheta_delta'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="ATBR.DKA_Determinisation.html#mem_table_finals"><span class="id" title="lemma">mem_table_finals</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Hmem_table_finals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">t</span> <span class="id" title="var">d</span>] <span class="id" title="var">n</span>]. <span class="id" title="keyword">Opaque</span> <a class="idref" href="ATBR.Classes.html#equal"><span class="id" title="method">equal</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="keyword">Transparent</span> <a class="idref" href="ATBR.Classes.html#equal"><span class="id" title="method">equal</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.MxGraph.html#mx_to_scal_compat"><span class="id" title="instance">mx_to_scal_compat</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Definitions.html#right_filter"><span class="id" title="lemma">right_filter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ATBR.MxSemiRing.html#mx_bool"><span class="id" title="definition">mx_bool</span></a> <a class="idref" href="ATBR.Model_RegExp.html#RegExp.Load.tt"><span class="id" title="abbreviation">tt</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#nat_of_state"><span class="id" title="abbreviation">nat_of_state</span></a> <span class="id" title="var">n</span>) <a class="idref" href="ATBR.DKA_Determinisation.html#size"><span class="id" title="abbreviation">size</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> <span class="id" title="var">j</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#j"><span class="id" title="variable">j</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#s"><span class="id" title="variable">s</span></a>))): <a class="idref" href="ATBR.Model_RegExp.html#RegExp.Load.KMX"><span class="id" title="abbreviation">KMX</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">
u 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="ATBR.Classes.html#dot"><span class="id" title="method">dot</span></a> <a class="idref" href="ATBR.Classes.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="ATBR.Classes.html#zero"><span class="id" title="method">zero</span></a> <a class="idref" href="ATBR.Classes.html#equal"><span class="id" title="method">equal</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Transparent</span> <a class="idref" href="ATBR.Classes.html#dot"><span class="id" title="method">dot</span></a> <a class="idref" href="ATBR.Classes.html#one"><span class="id" title="method">one</span></a> <a class="idref" href="ATBR.Classes.html#zero"><span class="id" title="method">zero</span></a> <a class="idref" href="ATBR.Classes.html#equal"><span class="id" title="method">equal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.MxSemiRing.html#mx_point_one_left"><span class="id" title="lemma">mx_point_one_left</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mx_intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hj</span>. <span class="id" title="keyword">Opaque</span> <a class="idref" href="ATBR.BoolView.html#eq_nat_bool"><span class="id" title="definition">eq_nat_bool</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">bool_simpl</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">fold_regex</span>. <span class="id" title="keyword">Transparent</span> <a class="idref" href="ATBR.BoolView.html#eq_nat_bool"><span class="id" title="definition">eq_nat_bool</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.DKA_Determinisation.html#theta_0"><span class="id" title="lemma">theta_0</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
</div>

<div class="doc">
m 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mx_intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hj</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="var">fold_regex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Definitions.html#labelling"><span class="id" title="definition">labelling</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ATBR.SemiRing.html#sum_distr_left"><span class="id" title="lemma">sum_distr_left</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.SemiLattice.html#sum_inversion"><span class="id" title="lemma">sum_inversion</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ATBR.SemiRing.html#sum_distr_right"><span class="id" title="lemma">sum_distr_right</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.SemiLattice.html#sum_inversion"><span class="id" title="lemma">sum_inversion</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.SemiLattice.html#sum_compat"><span class="id" title="lemma">sum_compat</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ATBR.SemiRing.html#dot_xif_zero"><span class="id" title="lemma">dot_xif_zero</span></a>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">fold_regex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ATBR.Classes.html#dot_neutral_left"><span class="id" title="method">dot_neutral_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ATBR.Classes.html#dot_neutral_right"><span class="id" title="method">dot_neutral_right</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.Graph.html#leq_antisym"><span class="id" title="definition">leq_antisym</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.SemiLattice.html#compare_sum_xif_zero"><span class="id" title="lemma">compare_sum_xif_zero</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">Hu</span>; <span class="id" title="var">bool_connectors</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hu'</span> <span class="id" title="var">Hu''</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="ATBR.DKA_Definitions.html#nat_of_state"><span class="id" title="abbreviation">nat_of_state</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#delta'"><span class="id" title="definition">delta'</span></a> <span class="id" title="var">d</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span>)); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hdelta'_below</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span>). <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bool_connectors</span>. <span class="id" title="var">num_prop</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.id_num"><span class="id" title="lemma">id_num</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htheta_delta'</span> <span class="id" title="tactic">by</span> <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">apply</span> &lt;- <a class="idref" href="ATBR.DKA_Determinisation.html#in_delta_set"><span class="id" title="lemma">in_delta_set</span></a>. <span class="id" title="tactic">exists</span> (<a class="idref" href="ATBR.DKA_Definitions.html#state_of_nat"><span class="id" title="abbreviation">state_of_nat</span></a> <span class="id" title="var">u</span>); <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">num_prop</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hu'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hu''</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">u</span> <span class="id" title="var">Hu</span> <span class="id" title="var">Hu'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htheta_delta'</span>, &lt;- <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.mem_iff"><span class="id" title="lemma">StateSetProps.mem_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hu''</span> <span class="id" title="tactic">by</span> <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> -&gt; <a class="idref" href="ATBR.DKA_Determinisation.html#in_delta_set"><span class="id" title="lemma">in_delta_set</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hu''</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hu''</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">k</span> [? ?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="ATBR.DKA_Definitions.html#nat_of_state"><span class="id" title="abbreviation">nat_of_state</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Htheta_below</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">clear</span> - <span class="id" title="var">H</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.id_num"><span class="id" title="lemma">id_num</span></a>. <span class="id" title="var">bool_connectors</span>. <span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.id_num"><span class="id" title="lemma">id_num</span></a>. <span class="id" title="tactic">auto</span>.<br/>

<br/>
</div>

<div class="doc">
v 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">mx_intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hj</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">fold_regex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ATBR.SemiRing.html#dot_xif_zero"><span class="id" title="lemma">dot_xif_zero</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hmem_table_finals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="ATBR.DKA_Definitions.html#StateSet.exists_"><span class="id" title="axiom">StateSet.exists_</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="ATBR.DKA_Definitions.html#StateSet.mem"><span class="id" title="axiom">StateSet.mem</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#finaux"><span class="id" title="abbreviation">finaux</span></a>) (<a class="idref" href="ATBR.DKA_Determinisation.html#theta"><span class="id" title="definition">theta</span></a> (<a class="idref" href="ATBR.DKA_Definitions.html#statesetelt_of_nat"><span class="id" title="definition">statesetelt_of_nat</span></a> <span class="id" title="var">i</span>))); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">fold_regex</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.exists_iff"><span class="id" title="lemma">StateSetProps.exists_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u</span> [<span class="id" title="var">Hu</span> <span class="id" title="var">Hu'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ATBR.SemiLattice.html#sum_fixed_xif_zero"><span class="id" title="lemma">sum_fixed_xif_zero</span></a> (<span class="id" title="var">v</span>:=<a class="idref" href="ATBR.DKA_Definitions.html#nat_of_state"><span class="id" title="abbreviation">nat_of_state</span></a> <span class="id" title="var">u</span>)). <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">algebra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.DKA_Determinisation.html#S.HA"><span class="id" title="variable">HA</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hu'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Htheta_below</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hu</span>. <span class="id" title="var">num_omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.Numbers.html#Positive.id_num"><span class="id" title="lemma">id_num</span></a>. <span class="id" title="var">bool_connectors</span>. <span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.SemiLattice.html#sum_zero"><span class="id" title="lemma">sum_zero</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ATBR.Graph.html#xif_false"><span class="id" title="lemma">xif_false</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ATBR.BoolView.html#bool_prop_iff"><span class="id" title="lemma">bool_prop_iff</span></a>. <span class="id" title="var">bool_connectors</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">StateSetProps.mem_prop</span>. <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ATBR.DKA_Definitions.html#StateSetProps.exists_iff"><span class="id" title="lemma">StateSetProps.exists_iff</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="var">StateSetProps.mem_prop</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ATBR.DKA_Determinisation.html#S"><span class="id" title="section">S</span></a>.<br/>

<br/>
</div>

<div class="doc">
We finally prove that the algorithm preserves the max_label field 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="preserve_max_label"><span class="id" title="lemma">preserve_max_label</span></a>: <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>, <a class="idref" href="ATBR.DKA_Definitions.html#DFA.max_label"><span class="id" title="projection">DFA.max_label</span></a> (<a class="idref" href="ATBR.DKA_Determinisation.html#NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#A"><span class="id" title="variable">A</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ATBR.DKA_Definitions.html#NFA.max_label"><span class="id" title="projection">NFA.max_label</span></a> <a class="idref" href="ATBR.DKA_Determinisation.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ATBR.DKA_Determinisation.html#NFA_to_DFA"><span class="id" title="definition">NFA_to_DFA</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="ATBR.DKA_Determinisation.html#build_store"><span class="id" title="definition">build_store</span></a> <span class="id" title="var">A</span>) <span class="id" title="keyword">as</span> [[? ?] ?]. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
